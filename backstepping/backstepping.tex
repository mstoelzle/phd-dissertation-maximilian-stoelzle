% \chapter{Piston-Driven Pneumatically-Actuated Soft Robots: Modeling and Backstepping Control}
% \chapter{Backstepping Control of Piston-Driven Pneumatically-Actuated Soft Robots}
\chapter{Backstepping Control of Pneumatic Piston-Driven Soft Robots}
\label{chp:backstepping}

\begin{foreword}
    So far, our models and controllers, as presented in Chapters \ref{chp:hsamodel} and \ref{chp:hsacontrol}, have neglected the dynamics of the actuator (e.g., the dynamics of the servo motor driving the \gls{HSA} rods). The underlying assumption is that the controller within the actuator is sufficiently fast and accurate to regulate the actuator towards the desired actuation (i.e., the control input). This approach is akin to a cascade controller, where the output of the outer control loop (the soft robot controller) serves as a reference to the inner control loop (the actuator controller), which operates at a faster rate.
    However, literature has shown that cascade controllers fail when the inner closed-loop system cannot track its reference accurately. While the mentioned assumption may be acceptable in certain scenarios, such as when the actuator is over-dimensioned (e.g., a fast-moving servo paired with a relatively slow-moving soft robot), it inherently limits our pursuit of more practical, fast-moving soft robots. It prevents us from fully exploiting the dynamics of the soft robot system.
    In this chapter, we model in Section~\ref{sec:backstepping:dynamic_model} the integrated dynamics of a pneumatically-actuated soft robot where pressure is generated using pneumatic pistons. Subsequently, in Section~\ref{sec:backstepping:backstepping_proof}, we exploit this dynamical model within a backstepping controller that considers the dynamics of the pneumatic pistons.
\end{foreword}

\blfootnote{This chapter is based on \faFileTextO~\emph{\textbf{M. St√∂lzle}, C. Della Santina (2021). Piston-driven pneumatically-actuated soft robots: Modeling and backstepping control. IEEE Control Systems Letters, 6, 1837-1842.}~\citep{stolzle2021piston}.

C.D.S. conceived the project, provided funding, derived the backstepping controller, including proof of stability, and supervised the project.
M.S. derived the model for the fluid volume contained in a planar PCC soft robot as a function of the configuration, implemented the controller, planned and carried out the simulations, and wrote the manuscript.
C.D.S. revised the manuscript.
}

\pagebreak

\begin{abstract}
    Actuators' dynamics have been mostly neglected when devising feedback controllers for continuum soft robots since the problem under the direct actuation hypothesis is already quite hard to solve. Directly considering actuation would have made the challenge too complex. However, these effects are, in practice, far from being negligible. The present chapter focuses on model-based control of piston-driven pneumatically-actuated soft robots. We propose a model of the relationship between the robot's state, the acting fluidic pressure, and the piston dynamics, which is agnostic to the chosen model for the soft system dynamics. 
    We show that backstepping is applicable even if the feedback coupling of the outer on the inner subsystem is not linear.
    Thus, we introduce a general model-based control strategy based on backstepping for soft robots actuated by fluidic drive. As an example, we derive a specialized version for a robot with piecewise constant curvature. 
\end{abstract}


%% Start the actual chapter on a new page.
\newpage

\input{backstepping/sections/S01_introduction}
\input{backstepping/sections/S02_dynamic_model}
\input{backstepping/sections/S03_backstepping_proof}
\input{backstepping/sections/S04_pcc_case}
\input{backstepping/sections/S05_simulations}
\input{backstepping/sections/S06_conclusion}

\section*{Afterword}
In this chapter, we have presented a dynamical model that, in addition to the standard soft robot dynamics, also considers the dynamics of a piston-driven pneumatic actuation system. Subsequently, we exploited the actuation dynamics within a backstepping controller.
We believe that similar approaches could also be applied to other soft robotic actuation methods, such as tendons pulled by electrical motors or \gls{SMA} actuators~\citep{zaidi2021actuation}.
For example, recently, a similar backstepping-based control approach has been successfully applied to soft robots actuated by valve-driven pressure regulators~\citep{franco2024model}, and a singular-perturbation approach for taking into account the actuation dynamics of tendon-driven soft robots has been proposed by \citet{ribeiro2025singular}.

Sometimes, modeling the dynamics of soft robots from first principles can be challenging, making it difficult to control their behavior effectively. In other cases, such as pneumatic systems, hysteresis effects are prevalent~\citep{vo2010new}, and direct measurement of the hysteretic displacement is not possible using available sensor data.
In such situations, employing learning approaches (e.g., machine learning with neural networks) can be beneficial. Still, we would like to preserve the interpretability, structure, and guarantees provided by fully physics-based models. For that reason, we explore integrating physical structures and stability guarantees into learning-based models and controllers in Part~\ref{part:learning} of this thesis.
